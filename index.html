<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Academic Planning Engine v5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  padding:20px;
  background:#020617;
  color:#e5e7eb;
  font-family:Arial,Helvetica,sans-serif;
}
h1,h2,h3{color:#38bdf8}
section{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:14px;
  padding:16px;
  margin-bottom:20px;
}
input,select,textarea{
  width:100%;
  padding:6px;
  margin-bottom:10px;
  border-radius:6px;
  border:none;
}
button{
  background:#38bdf8;
  color:#020617;
  border:none;
  border-radius:8px;
  padding:8px 14px;
  font-weight:bold;
  cursor:pointer;
}
button:hover{background:#0ea5e9}
.good{color:#4ade80}
.warn{color:#facc15}
.bad{color:#f87171}
.course{
  border-bottom:1px solid #1e293b;
  padding-bottom:10px;
  margin-bottom:10px;
}
.rule{
  font-size:14px;
  color:#94a3b8;
}
canvas{
  background:#020617;
  border-radius:10px;
}
</style>
</head>

<body>

<h1>üéì Academic Planning Engine v5</h1>
<p>Multi-University GPA Rule System</p>

<section>
<h2>1Ô∏è‚É£ University Rule Engine</h2>
<select id="school" onchange="render()">
  <option value="generic">Generic North America</option>
  <option value="uoft">University of Toronto</option>
  <option value="ubc">University of British Columbia</option>
  <option value="us">US College (A-F)</option>
</select>
<p class="rule" id="ruleText"></p>
</section>

<section>
<h2>2Ô∏è‚É£ Graduation Configuration</h2>
<label>Total Credits Required</label>
<input type="number" id="gradCredits" value="120">
<label>Target Graduation GPA</label>
<input type="number" step="0.01" id="targetGPA" value="3.2">
</section>

<section>
<h2>3Ô∏è‚É£ Courses (Completed / Planned)</h2>
<div id="courses"></div>
<button onclick="addCourse()">+ Add Course</button>
</section>

<section>
<h2>4Ô∏è‚É£ Academic Evaluation</h2>
<p id="status"></p>
<p id="evaluation"></p>
</section>

<section>
<h2>5Ô∏è‚É£ GPA Trajectory</h2>
<canvas id="chart" width="340" height="170"></canvas>
</section>

<section>
<h2>6Ô∏è‚É£ Advisor-Level Recommendation</h2>
<p id="advice"></p>
</section>

<script>
const RULES={
  generic:{
    name:"Generic North America",
    map:g=>{
      if(!isNaN(g)){
        if(g>=90)return 4;
        if(g>=80)return 3.7;
        if(g>=70)return 3;
        if(g>=60)return 2;
        return 0;
      }
      return {A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,C:2,D:1,F:0}[g]||0;
    },
    note:"Standard 4.0 GPA with percentage support."
  },
  uoft:{
    name:"University of Toronto",
    map:g=>{
      if(!isNaN(g)){
        if(g>=85)return 4;
        if(g>=80)return 3.7;
        if(g>=77)return 3.3;
        if(g>=73)return 3;
        if(g>=70)return 2.7;
        if(g>=67)return 2.3;
        if(g>=63)return 2;
        if(g>=60)return 1.7;
        return 0;
      }
      return {A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,C+:2.3,C:2,D:1,F:0}[g]||0;
    },
    note:"UofT GPA scale with fine percentage brackets."
  },
  ubc:{
    name:"UBC",
    map:g=>{
      if(!isNaN(g)){
        if(g>=90)return 4;
        if(g>=85)return 3.7;
        if(g>=80)return 3.3;
        if(g>=76)return 3;
        if(g>=72)return 2.7;
        if(g>=68)return 2.3;
        if(g>=64)return 2;
        if(g>=60)return 1.7;
        return 0;
      }
      return {A+:4,A:4,"A-":3.7,B+:3.3,B:3,"B-":2.7,C+:2.3,C:2,D:1,F:0}[g]||0;
    },
    note:"UBC GPA with A+ recognized."
  },
  us:{
    name:"US College",
    map:g=>{
      return {A:4,"A-":3.7,B+:3.3,B:3,"B-":2.7,C+:2.3,C:2,D:1,F:0}[g.toUpperCase()]||0;
    },
    note:"Letter-grade only GPA system."
  }
};

let courses=JSON.parse(localStorage.getItem("v5_courses")||"[]");

function addCourse(name="",grade="",credit=3){
  courses.push({name,grade,credit});
  save();
}
function save(){
  localStorage.setItem("v5_courses",JSON.stringify(courses));
  render();
}

function render(){
  const school=document.getElementById("school").value;
  document.getElementById("ruleText").innerText=RULES[school].note;

  const box=document.getElementById("courses");
  box.innerHTML="";
  courses.forEach((c,i)=>{
    box.innerHTML+=`
    <div class="course">
      <label>Course</label>
      <input value="${c.name}" onchange="courses[${i}].name=this.value;save()">
      <label>Grade / Expected</label>
      <input value="${c.grade}" onchange="courses[${i}].grade=this.value;save()">
      <label>Credits</label>
      <input type="number" value="${c.credit}" onchange="courses[${i}].credit=this.value;save()">
    </div>`;
  });
  calculate();
}

function calculate(){
  const school=document.getElementById("school").value;
  let total=0,credits=0;
  courses.forEach(c=>{
    total+=RULES[school].map(c.grade)*c.credit;
    credits+=Number(c.credit);
  });
  const gpa=credits?total/credits:0;
  const grad=+document.getElementById("gradCredits").value;
  const target=+document.getElementById("targetGPA").value;
  const remain=grad-credits;
  const need=remain>0?((target*(credits+remain)-total)/remain):0;

  document.getElementById("status").innerHTML=
    `School: ${RULES[school].name}<br>
     Credits: ${credits}/${grad}<br>
     Current GPA: ${gpa.toFixed(2)}`;

  let evalText="";
  if(need>4)evalText="<span class='bad'>Target GPA impossible under current rules</span>";
  else if(need>3.7)evalText="<span class='warn'>Requires near-perfect future performance</span>";
  else evalText="<span class='good'>Graduation target achievable</span>";
  document.getElementById("evaluation").innerHTML=evalText;

  draw(gpa,need);
  advise(school,gpa,need);
}

function draw(cur,need){
  const ctx=document.getElementById("chart").getContext("2d");
  ctx.clearRect(0,0,340,170);
  ctx.strokeStyle="#38bdf8";
  ctx.beginPath();
  ctx.moveTo(10,150-cur*30);
  ctx.lineTo(330,150-need*30);
  ctx.stroke();
}

function advise(school,gpa,need){
  let msg="";
  if(school==="uoft"&&gpa<3){
    msg="UofT warning: GPA below 3.0 reduces program flexibility.";
  }else if(school==="ubc"&&need>3.5){
    msg="UBC strategy: prioritize high-credit electives to stabilize GPA.";
  }else if(school==="us"&&need>3.3){
    msg="US system: avoid C grades ‚Äî they heavily damage cumulative GPA.";
  }else{
    msg="Maintain balance between credit load and GPA stability.";
  }
  document.getElementById("advice").innerText=msg;
}

render();
</script>

</body>
</html>


