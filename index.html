<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Monster Academic System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* =========================
   GLOBAL STYLE
========================= */
* {
  box-sizing: border-box;
}
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0f172a;
  color: #e5e7eb;
}
header {
  background: #020617;
  padding: 16px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
}
nav {
  display: flex;
  background: #020617;
  border-bottom: 1px solid #1e293b;
}
nav button {
  flex: 1;
  padding: 12px;
  background: none;
  border: none;
  color: #94a3b8;
  cursor: pointer;
}
nav button.active {
  background: #1e293b;
  color: #fff;
}
#app {
  padding: 20px;
}
.card {
  background: #020617;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}
h3 {
  margin-top: 0;
}
input, select {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
  background: #020617;
  border: 1px solid #334155;
  color: #fff;
  border-radius: 6px;
}
button.primary {
  width: 100%;
  margin-top: 10px;
  padding: 10px;
  background: #2563eb;
  border: none;
  border-radius: 6px;
  color: white;
  cursor: pointer;
}
button.danger {
  background: #dc2626;
  border: none;
  padding: 6px 10px;
  color: white;
  border-radius: 6px;
  cursor: pointer;
}
.table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
.table th, .table td {
  padding: 8px;
  border-bottom: 1px solid #334155;
  text-align: left;
}
.small {
  font-size: 13px;
  color: #94a3b8;
}
.flex {
  display: flex;
  gap: 10px;
}
</style>
</head>

<body>

<header>ðŸŽ“ Monster Academic System</header>
<nav id="nav"></nav>
<div id="app"></div>

<script>
/* =========================
   CORE ENGINE
========================= */
const Core = {
  version: "2.0",
  state: {
    user: {},
    semesters: [],
    settings: {
      scale: 4.3
    }
  },
  listeners: {},
  init() {
    const saved = localStorage.getItem("MONSTER_STATE");
    if (saved) this.state = JSON.parse(saved);
  },
  save() {
    localStorage.setItem("MONSTER_STATE", JSON.stringify(this.state));
  },
  on(event, fn) {
    this.listeners[event] = this.listeners[event] || [];
    this.listeners[event].push(fn);
  },
  emit(event, payload) {
    (this.listeners[event] || []).forEach(fn => fn(payload));
    this.save();
  }
};

Core.init();

/* =========================
   UTIL
========================= */
function uid() {
  return Math.random().toString(36).slice(2, 10);
}

/* =========================
   GPA ENGINE
========================= */
const GPAEngine = {
  map: {
    "A+": 4.3, "A": 4.0, "A-": 3.7,
    "B+": 3.3, "B": 3.0, "B-": 2.7,
    "C+": 2.3, "C": 2.0, "C-": 1.7,
    "D": 1.0, "F": 0.0
  },
  overall() {
    let pts = 0, cr = 0;
    Core.state.semesters.forEach(s => {
      s.courses.forEach(c => {
        pts += this.map[c.grade] * c.credits;
        cr += c.credits;
      });
    });
    return cr ? (pts / cr).toFixed(2) : "â€”";
  }
};

/* =========================
   PAGE SYSTEM
========================= */
const PageSystem = {
  pages: {},
  current: null,
  register(name, render) {
    this.pages[name] = render;
  },
  mount(name) {
    this.current = name;
    document.getElementById("app").innerHTML = this.pages[name]();
    renderNav();
  }
};

function renderNav() {
  const nav = document.getElementById("nav");
  nav.innerHTML = "";
  Object.keys(PageSystem.pages).forEach(p => {
    const btn = document.createElement("button");
    btn.textContent = p;
    btn.className = PageSystem.current === p ? "active" : "";
    btn.onclick = () => PageSystem.mount(p);
    nav.appendChild(btn);
  });
}

/* =========================
   SEMESTER & COURSE LOGIC
========================= */
function addSemester(name) {
  Core.state.semesters.push({
    id: uid(),
    name,
    courses: []
  });
  Core.emit("semester:add");
}

function addCourse(semId, data) {
  const sem = Core.state.semesters.find(s => s.id === semId);
  sem.courses.push({
    id: uid(),
    name: data.name,
    credits: Number(data.credits),
    grade: data.grade
  });
  Core.emit("course:add");
}

/* =========================
   PAGES
========================= */

PageSystem.register("Dashboard", () => `
  <div class="card">
    <h3>Overall GPA</h3>
    <div style="font-size:28px">${GPAEngine.overall()}</div>
    <div class="small">Calculated from all semesters</div>
  </div>
`);

PageSystem.register("Semesters", () => `
  <div class="card">
    <h3>Add Semester</h3>
    <input id="semName" placeholder="e.g. Fall 2025">
    <button class="primary" onclick="
      addSemester(document.getElementById('semName').value);
      PageSystem.mount('Semesters');
    ">Add Semester</button>
  </div>

  ${Core.state.semesters.map(s => `
    <div class="card">
      <h3>${s.name}</h3>

      <table class="table">
        <tr><th>Course</th><th>Credits</th><th>Grade</th></tr>
        ${s.courses.map(c => `
          <tr>
            <td>${c.name}</td>
            <td>${c.credits}</td>
            <td>${c.grade}</td>
          </tr>
        `).join("")}
      </table>

      <div class="flex">
        <input id="cname-${s.id}" placeholder="Course name">
        <input id="ccr-${s.id}" type="number" placeholder="Credits">
        <select id="cgr-${s.id}">
          ${Object.keys(GPAEngine.map).map(g=>`<option>${g}</option>`).join("")}
        </select>
      </div>

      <button class="primary" onclick="
        addCourse('${s.id}', {
          name: document.getElementById('cname-${s.id}').value,
          credits: document.getElementById('ccr-${s.id}').value,
          grade: document.getElementById('cgr-${s.id}').value
        });
        PageSystem.mount('Semesters');
      ">Add Course</button>
    </div>
  `).join("")}
`);

PageSystem.register("Profile", () => `
  <div class="card">
    <h3>Student Profile</h3>
    <input id="pname" placeholder="Name" value="${Core.state.user.name || ""}">
    <input id="pmajor" placeholder="Major" value="${Core.state.user.major || ""}">
    <button class="primary" onclick="
      Core.state.user.name = pname.value;
      Core.state.user.major = pmajor.value;
      Core.save();
      PageSystem.mount('Profile');
    ">Save</button>
  </div>
`);

/* =========================
   BOOT
========================= */
PageSystem.mount("Dashboard");
</script>

</body>
</html>

